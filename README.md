# StudentMate - 学生学习助手应用

## 项目概述

StudentMate是一款专为学生设计的Android应用，提供课程表管理、待办事项、倒数日等实用功能，帮助学生更好地管理学习生活。特别针对武汉理工大学学生，提供了教务系统课程表自动导入功能，极大简化了课程表的创建和维护流程。

## 功能特性

### 📅 课程表管理
- 支持手动添加和编辑课程信息
- **武汉理工大学专属**：通过WebView直接从教务系统导入课程表
- 严格的课程数据验证，确保导入结果准确可靠
- 直观的周视图课程展示

### ✅ 待办事项
- 创建和管理学习任务
- 设置截止日期和提醒
- 任务状态跟踪

### ⏰ 倒数日
- 记录重要考试、作业截止日期等
- 实时显示倒计时信息
- 稳定的日期选择器，避免应用崩溃

### 🎓 教务系统集成
- 内置WebView直接访问武汉理工大学智慧理工大网站
- 自动检测课表页面并提取课程信息
- 支持手动触发HTML内容提取
- 严格的页面验证，确保只在正确的"学生课程表"页面进行解析

## 技术栈

- **开发语言**：Kotlin
- **UI框架**：Jetpack Compose
- **网络请求**：OkHttp
- **数据解析**：Gson、Jsoup
- **后端服务**：Bmob后端云
- **导航**：Jetpack Navigation
- **异步处理**：RxJava2

## 项目结构

```
app/
├── src/
│   ├── main/
│   │   ├── AndroidManifest.xml
│   │   ├── java/com/example/studentmate/
│   │   │   ├── MainActivity.kt          # 应用入口
│   │   │   ├── MainScreen.kt            # 主页面导航
│   │   │   ├── screens/
│   │   │   │   ├── ScheduleScreen.kt    # 课程表页面
│   │   │   │   ├── TodoScreen.kt        # 待办事项页面
│   │   │   │   ├── CountdownScreen.kt   # 倒数日页面
│   │   │   │   ├── ImportCourseScreen.kt # 课程导入页面
│   │   │   │   ├── WebViewScreen.kt     # WebView页面
│   │   │   │   └── LoginScreen.kt       # 登录页面
│   │   │   ├── ui/
│   │   │   │   └── theme/
│   │   │   ├── Color.kt
│   │   │   ├── Type.kt
│   │   │   └── Theme.kt
│   │   └── res/
│   │       ├── values/
│   │       ├── drawable/
│   │       └── mipmap-*/
│   ├── androidTest/
│   └── test/
└── build.gradle.kts
```

## 安装说明

### 环境要求
- Android Studio Hedgehog (或更高版本)
- Android SDK 36
- Kotlin 1.9.0+ (或兼容版本)
- JDK 11

### 构建步骤

1. 克隆项目到本地：
   ```bash
   git clone <项目地址>
   cd studentmate
   ```

2. 打开Android Studio并导入项目

3. 同步Gradle依赖

4. 连接Android设备或启动模拟器

5. 运行应用

## 使用指南

### 首次使用

1. 启动应用后，进入登录/注册页面
2. 注册一个新账号或使用现有账号登录
3. 登录成功后，进入主功能页面

### 导入课程表 (武汉理工大学学生)

1. 在底部导航栏点击"课表"图标
2. 点击导入课程按钮
3. 应用会打开WebView并导航到武汉理工大学智慧理工大网站
4. 输入你的智慧理工大账号密码登录
5. 依次点击：教务系统 → 统一身份认证登录 → 运行栏目 → 我的课表(本研) → 学生课程表
6. 在学生课程表页面，点击"当前提取"按钮
7. 应用会自动解析课程信息并导入
8. 导入成功后，会自动返回课程表页面并显示导入的课程

### 创建待办事项

1. 在底部导航栏点击"待办"图标
2. 点击添加按钮
3. 输入任务名称、截止日期和描述
4. 点击保存

### 添加倒数日

1. 在底部导航栏点击"倒数日"图标
2. 点击添加按钮
3. 输入事件名称和日期
4. 点击保存

## 技术亮点

### 课程表导入功能优化

- **严格的页面验证**：通过检查页面内容中的特定关键词（如"data-week"、"wut_table"、"学生课表"）确保只在正确的页面进行解析
- **防止虚假课程**：设置课程数量限制（1-40门），避免导入无效数据
- **异步处理优化**：使用Handler和主线程同步机制，解决WebView数据提取的时序问题
- **错误处理**：完善的异常捕获和用户提示，确保应用稳定性

### 倒数日功能修复

- 替换了不稳定的Material3 DatePicker，使用稳定的原生实现
- 添加了完整的错误处理机制，避免因日期选择导致的应用崩溃
- 优化了日期格式处理，确保跨设备兼容性

## 注意事项

1. 课程表导入功能仅适用于武汉理工大学学生
2. 请确保设备已连接互联网，以便访问教务系统
3. 导入课程时，请严格按照指定步骤操作，确保在正确的"学生课程表"页面点击提取按钮
4. 如果导入失败，请检查是否在正确的页面，并确保网络连接正常

## 常见问题

### Q: 点击提取按钮后没有反应怎么办？
A: 请确保你已登录智慧理工大并进入了正确的"学生课程表"页面。如果问题仍然存在，请检查网络连接并重试。

### Q: 为什么显示"成功导入36门课程"但实际没有课程？
A: 这是因为之前的版本存在解析逻辑问题，现已修复。请确保你使用的是最新版本的应用。

### Q: 倒数日页面点击后应用崩溃怎么办？
A: 该问题已修复，新版本使用了稳定的日期选择器实现。

### Q: 如何手动刷新课程表？
A: 请进入课程导入页面，重新执行导入流程。

## 更新日志

### v1.0.0 (2024-12-01)
- 首次发布
- 实现课程表管理功能
- 实现待办事项功能
- 实现倒数日功能
- 集成武汉理工大学教务系统课程导入功能
- 修复了应用崩溃和数据解析错误等问题

## 贡献

欢迎提交Issue和Pull Request来帮助改进这个项目。

## 许可证

本项目采用MIT许可证。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 邮箱：[your-email@example.com]
- GitHub：[your-github-username]

---

**StudentMate - 让学习更高效！** 🎉